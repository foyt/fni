<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<ui:composition 
  xmlns="http://www.w3.org/1999/xhtml" 
  xmlns:ui="http://java.sun.com/jsf/facelets" 
  xmlns:f="http://java.sun.com/jsf/core"
  xmlns:h="http://java.sun.com/jsf/html">
<div title="Edit Publication #{param.publicationName}" class="gamelibrary-dialog gamelibrary-edit-publication-dialog">  
  
  <h:form styleClass="gamelibrary-edit-publication-form">
    <div class="dialog-section">
      <h:outputLabel value="Type" />
      <div>
        <h:selectOneMenu>
          <f:selectItem itemLabel="BOOK"/>
        </h:selectOneMenu>
      </div>
    </div>
    
    <div class="dialog-section">
      <h:outputLabel value="Name" />
      <div>
        <h:inputText name="name" value="#{publicationEditBackingBean.publicationName}" styleClass="max-width" required="required"/>
      </div>
    </div>
    
    <div class="dialog-section">
      <h:outputLabel value="Description" />
      <div>
        <h:inputTextarea name="description" value="#{publicationEditBackingBean.publicationDescription}" rows="5" styleClass="max-width" required="required"/>
      </div>
    </div>
    
    <div class="dialog-section">
      <h:outputLabel value="Price (EUR)" />
      <div>
        <h:inputText name="price" type="number" value="#{publicationEditBackingBean.publicationPrice}" styleClass="max-width" required="required"/>
      </div>
    </div>
        
    <div class="dialog-section">
      <h:outputLabel value="Pdf File" />
      <div>
        <input type="file" name="file"/>
      </div>
    </div>
    
    <div class="dialog-section">
      <h:outputLabel value="Tags" />
      <div>
        <h:selectOneMenu id="tag-select">
          <f:selectItems value="#{publicationEditBackingBean.tagSelectItems}" />
        </h:selectOneMenu>
        
        <div class="new-tag-container">        
          <label>New Tag</label> 
          <div class="max-width">
            <input type="text" value="" name="new-tag"/>
            <a class="add-new-tag" href="javascript:void(null);">Add</a>
          </div>
        </div>
        
      </div>
      <div class="tags">
        <h:inputHidden id="tags" value="#{publicationEditBackingBean.publicationTags}" />
      </div>
    </div>
    
    <div class="dialog-section">
      <h:outputLabel value="License" />
      <div>
        <h:selectOneMenu value="#{publicationEditBackingBean.licenseType}" id="license-select">
          <f:selectItems value="#{publicationEditBackingBean.licenseSelectItems}"></f:selectItems>
        </h:selectOneMenu>
        <div class="license-cc-container">
          <h:outputLabel value="Allow modifications of your work?" />
          <h:selectOneRadio value="#{publicationEditBackingBean.creativeCommonsDerivatives}">
            <f:selectItem itemLabel="Yes" itemValue="YES"/>
            <f:selectItem itemLabel="No" itemValue="NO"/>
            <f:selectItem itemLabel="Yes, as long as others share alike " itemValue="SHARE_ALIKE"/>
          </h:selectOneRadio>
          
          <h:outputLabel value="Allow commercial uses of your work?" />
          <h:selectOneRadio value="#{publicationEditBackingBean.creativeCommonsCommercial}">
            <f:selectItem itemLabel="Yes" itemValue="YES"/>
            <f:selectItem itemLabel="No" itemValue="NO"/>
          </h:selectOneRadio>
        </div>

        <div class="license-other" >
          <h:outputLabel value="Link to license" />
          <h:inputText value="#{publicationEditBackingBean.licenseOther}" styleClass="max-width"/>
        </div>
      </div>
    </div>

    <div class="dialog-section">
      <h:outputLabel value="Author(s)" />
      <h:selectOneMenu id="author-select" styleClass="max-width">
        <f:selectItems value="#{publicationEditBackingBean.authorSelectItems}"/>
      </h:selectOneMenu>
      <h:inputHidden id="author-ids" value="#{publicationEditBackingBean.authorIds}" />
      <div class="authors-container">
        <ui:repeat var="author" value="#{publicationEditBackingBean.authors}">
          <span class="author" data-author-id="#{author.id}">
            <span>#{author.fullName}</span>
            <a class="remove-author" href="javascript:void(null);"></a>
          </span>
        </ui:repeat>
      </div>
    </div>

    <div class="dialog-section">
      <h:outputLabel value="Settings" />
      <div>
        <h:selectBooleanCheckbox name="requires-delivery" value="#{publicationEditBackingBean.publicationRequiresDelivery}"/>
        <h:outputLabel value="Requires Delivery" />
      </div>
      <div>
        <h:selectBooleanCheckbox name="purchasable" value="#{publicationEditBackingBean.publicationPurchasable}"/>
        <h:outputLabel value="Purchasable" />
      </div>
    </div>

    <div class="dialog-section">
      <h:outputLabel value="Details" />
      <table class="details-table">
        <tr>
          <td><h:outputLabel value="Width" /></td><td><h:inputText name="width" value="#{publicationEditBackingBean.publicationWidth}"/><span>mm</span></td>
        </tr>
        <tr>
          <td><h:outputLabel value="Height" /></td><td><h:inputText name="height" value="#{publicationEditBackingBean.publicationHeight}"/><span>mm</span></td>
        </tr>
        <tr>
          <td><h:outputLabel value="Depth" /></td><td><h:inputText name="depth" value="#{publicationEditBackingBean.publicationDepth}"/><span>mm</span></td>
        </tr>
        <tr>
          <td><h:outputLabel value="Weight" /></td><td><h:inputText name="weight" value="#{publicationEditBackingBean.publicationWeight}"/><span>g</span></td>
        </tr>
      </table>
    </div>

    <h4>Book Options</h4>
    <div class="dialog-section">
      <table class="book-options-table">
        <tr>
          <td>
            <h:outputLabel value="Downloadable" />
          </td>
          <td>
            <h:selectBooleanCheckbox name="downloadable" value="#{publicationEditBackingBean.publicationDownloadable}"/>
          </td>
        </tr>
        <tr>
          <td><h:outputLabel value="Number Of Pages" /></td><td><h:inputText name="numberOfPages" value="#{publicationEditBackingBean.bookNumberOfPages}"/></td>
        </tr>
      </table>
    </div>
    
    <div style="display: none">
      <h:commandButton id="submit-button" action="#{publicationEditBackingBean.save}">
        <f:ajax execute="@form" onevent="onJsfPublicationUpdate"/>
      </h:commandButton>
    </div>
  </h:form>
  
  <div id="edit-publication-file-form" style="display: none">
    <iframe src="about:blank" width="0" height="0" name="_file_form_target_"></iframe>
    <form method="post" enctype="multipart/form-data" action="#{request.contextPath}/gamelibrary/publicationFiles/#{publicationEditBackingBean.publicationId}" target="_file_form_target_"></form>
  </div>
</div>  
</ui:composition>
